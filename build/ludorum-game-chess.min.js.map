{"version":3,"sources":["../src/__prologue__.js","../src/Chess.js","../src/pieces.js","../src/__epilogue__.js"],"names":["__init__","base","Sermat","ludorum","declare","raiseIf","obj","copy","raise","iterable","Iterable","Game","Checkerboard","utils","exports","CheckerboardFromString","players","UserInterface","__package__","__name__","__dependencies__","__SERMAT__","include","Chess","name","constructor","params","call","this","activePlayer","board","boardFromFEN","initialBoard","castling","enPassant","halfMoves","fullMoves","Math","max","game","pieces","map","player","kinds","mapApply","kindName","kindConstructor","toObject","forEachApply","_","piece","push","moves","hasOwnProperty","King","checkMoves","length","Error","__moves__","kind","flatten","p","toArray","next","haps","update","move","movingPiece","square","args","opponent","result","defeat","draw","static __SERMAT__","identifier","serializer","toFEN","materializer","fromFEN","clone","dual coordFromString","str","charAt","charCodeAt","dual coordToString","coord","String","fromCharCode","toString","horizontals","hline","lineText","emptySquares","forEach","join","toLowerCase","coordToString","static fromFEN","trim","match","FEN_REGEXP","exec","coordFromString","static FEN_REGEXP","dual boardFromFEN","rows","split","Pawn","n","Knight","b","Bishop","r","Rook","q","Queen","k","row","c","sq","isNaN","CheckerboardFromPieces","static heuristics","prototype","games","Piece","position","objects","unimplemented","canMove","moveTo","__place__","KINDS","direction","d","isValidCoord","height","promotions","DELTAS","m","s","walks","DIRECTIONS","DIAGONAL","walk","cont","tail","takeWhile","ORTHOGONAL","EVERY","pos","abs"],"mappings":";;yTAEA,QAASA,GAASC,EAAMC,EAAQC,GAAW,YAE1C,IAAIC,GAAUH,EAAKG,QAIlBC,GAHMJ,EAAKK,IACJL,EAAKM,KACJN,EAAKO,MACHP,EAAKI,SAEfI,GADWR,EAAKS,SACLT,EAAKQ,UAChBE,EAAOR,EAAQQ,KACfC,EAAeT,EAAQU,MAAMD,aAK1BE,GAJsBX,EAAQU,MAAME,uBACvBZ,EAAQa,QAAQC,eAIhCC,YAAa,wBACbC,SAAU,wBACVnB,SAAUA,EACVoB,kBAAmBnB,EAAMC,EAAQC,GACjCkB,YAAcC,SAAUrB,EAAME,MCjB5BoB,EAAQT,EAAQS,MAAQnB,EAAQO,GACnCa,KAAM,QAINR,SAAS,QAAU,SAKnBS,YAAa,QAASF,GAAMG,GAC3BA,EAASA,MACTf,EAAKgB,KAAKC,KAAMF,EAAOG,cAAgBD,KAAKZ,QAAQ,IACpDY,KAAKE,MAASJ,EAAOI,MACM,gBAAjBJ,GAAOI,MAAqBP,EAAMQ,aAAaL,EAAOI,OAC7DJ,EAAOI,MAFmBF,KAAKI,eAGlCJ,KAAKK,SAAWP,EAAOO,UAAY,OACnCL,KAAKM,UAAYR,EAAOQ,UACxBN,KAAKO,UAA8B,EAAlBT,EAAOS,UACxBP,KAAKQ,UAAYC,KAAKC,IAAsB,EAAlBZ,EAAOU,UAAc,EAG/C,IAAIG,GAAOX,IACXA,MAAKY,OAAS/B,EAASmB,KAAKZ,SAASyB,IAAI,SAAUC,GAClD,OAAQA,EAAQjC,EAAS8B,EAAKI,OAAOC,SAAS,SAAUC,EAAUC,GACjE,OAAQD,QACNE,cACDA,WACHtC,EAASmB,KAAKE,MAAMU,QAAQQ,aAAa,SAAUC,EAAGC,GACrDX,EAAKC,OAAOU,EAAMR,QAAQQ,EAAM1B,MAAM2B,KAAKD,MAS7CE,MAAO,WACN,IAAKxB,KAAKyB,eAAc,aAAe,CACtC,GAAId,GAAOX,KACVE,EAAQF,KAAKE,MACbD,EAAeD,KAAKC,cACbD,MAAKY,OAAOX,GAAcyB,KAAK,EAIvC,IAHC1B,KAAK2B,gBAGF3B,KAAK2B,WAAWC,OAAS,GAS5B,KAAM,IAAIC,OAAK,wCARf7B,MAAK8B,UAAYzD,EAAKK,IAAIuB,EAAcpB,EAASmB,KAAKY,OAAOX,IAC3De,SAAS,SAAUe,EAAMnB,GACzB,MAAOA,KACLoB,UAAUnB,IAAI,SAAUoB,GAC1B,MAAOA,GAAET,MAAMb,EAAMT,KACnB8B,UAAUE,WAMhB,MAAOlC,MAAK8B,WAKbK,KAAM,SAAcX,EAAOY,EAAMC,GAEhC5D,EAAQ2D,EAAM,gCAAiCA,EAAM,KACrD,IAAInC,GAAeD,KAAKC,eACvBqC,EAAOd,EAAMvB,GACbsC,EAAcvC,KAAKE,MAAMsC,OAAOF,EAAK,IAElCG,GACHxC,aAAcD,KAAK0C,WACnBxC,MAAOqC,EAAYJ,KAAKnC,KAAMA,KAAKE,MAAOoC,GAC1CjC,SAAUL,KAAKK,SACfC,UAAW,KACXC,UAAWP,KAAKO,UAChBC,UAAWR,KAAKQ,WAA8B,UAAjBP,EAA2B,EAAI,GAE7D,OAAIoC,IACHrC,KAAKH,YAAY4C,GACVzC,MAEA,GAAIA,MAAKH,YAAY4C,IAM9BE,OAAQ,WAEP,MAAI3C,MAAKwB,QAAQxB,KAAKC,gBACd,KACGD,KAAK2B,WAAWC,OAAS,EAC5B5B,KAAK4C,SAEL5C,KAAK6C,QAQdC,qBACCC,WAAY,QACZC,WAAY,SAAyBtE,GACpC,OAAQA,EAAIuE,UAEbC,aAAc,SAA2BxE,EAAK+D,GAC7C,MAAOA,GAAO9C,EAAMwD,QAAQV,EAAK,IAAM,OAIzCW,MAAO,WACN,MAAOzD,GAAMwD,QAAQnD,KAAKiD,UAG3BI,uBAAwB,SAAyBC,GAChD,QAASA,EAAIC,OAAO,GAAK,EAAGD,EAAIE,WAAW,GAAK,IAAIA,WAAW,KAGhEC,qBAAsB,SAAuBC,GAC5C,MAAOC,QAAOC,aAAY,IAAKJ,WAAW,GAAKE,EAAM,KAAOA,EAAM,GAAK,IAMxEG,SAAU,WACT,MAAO7D,MAAKiD,SAGbA,MAAO,WACN,GAAI/C,GAAQF,KAAKE,MAChByC,EAASzC,EAAM4D,cAAcjD,IAAI,SAAUkD,GAC1C,GAAIC,GAAW,GACdC,EAAe,CAgBhB,OAfAF,GAAMG,QAAQ,SAAUR,GACvB,GAAIzB,GAAI/B,EAAMsC,OAAOkB,EAChBzB,IAGAgC,EAAe,IAClBD,GAAYC,EACZA,EAAe,GAEhBD,GAAY/B,EAAE4B,YANdI,MASEA,EAAe,IAClBD,GAAYC,GAEND,IACLG,KAAI,IAKR,OAJAxB,IAAU,IAAM3C,KAAKC,eAAesD,OAAO,GAAGa,cAC9CzB,GAAU,IAAK3C,KAAKK,SACpBsC,GAAU,KAAM3C,KAAKM,UAAYN,KAAKqE,cAAcrE,KAAKM,WAAa,KACtEqC,GAAU,IAAK3C,KAAKO,UAAU,IAAMP,KAAKQ,WAO1C8D,iBAAkB,SAAiBhB,GAClCA,EAAMA,EAAIiB,MACV,IAAIC,GAAQxE,KAAKyE,WAAWC,KAAKpB,EAEjC,OADA7E,IAAS+F,EAAO,uBAAwBlB,EAAK,MACtC,GAAItD,OACVE,MAAOF,KAAKG,aAAaqE,EAAM,IAC/BvE,aAA2B,MAAbuE,EAAM,GAAa,QAAU,QAC3CnE,SAAuB,MAAbmE,EAAM,GAAa,GAAKA,EAAM,GACxClE,UAAwB,MAAbkE,EAAM,GAAa,KAAOxE,KAAK2E,gBAAgBH,EAAM,IAChEjE,WAAYiE,EAAM,GAClBhE,WAAYgE,EAAM,MAQpBI,oBACC,sHAEDC,oBAAqB,SAAsBvB,GAC1C,GAAIwB,GAAOxB,EAAIyB,MAAK,KACnBhE,GACCkB,EAAKjC,KAAKe,MAAMiE,KAChBC,EAAKjF,KAAKe,MAAMmE,OAChBC,EAAKnF,KAAKe,MAAMqE,OAChBC,EAAKrF,KAAKe,MAAMuE,KAChBC,EAAKvF,KAAKe,MAAMyE,MAChBC,EAAKzF,KAAKe,MAAMW,MAEjBd,IAeD,OAdAkE,GAAKZ,QAAQ,SAAUwB,EAAKL,GAC3B,GAAIM,GAAI,CACR9G,GAAS6G,GAAKxB,QAAQ,SAAU0B,GAC1BC,MAAMD,IAGVhF,EAAOW,KAAK,IAAIR,EAAM6E,EAAGxB,gBACxBwB,IAAOA,EAAGxB,cAAgB,QAAU,SACnCiB,EAAGM,KAELA,KANAA,GAAS,EAAJC,MAUD,GAAIrH,GAAQU,MAAM6G,uBAAuB,EAAG,EAAGlF,IAQvDmF,wBAWDpG,GAAMS,aAAeT,EAAMqG,UAAU5F,aAAe,WACnD,MAAOT,GAAMQ,aAAY,gDAK1B5B,EAAQ0H,MAAMtG,MAAQA,EAItBA,EAAMF,WAAWsD,WAAa7D,EAAQI,YAAY,IAAMK,EAAMF,WAAWsD,WACzE7D,EAAQO,WAAWC,QAAQ6B,KAAK5B,GAChCrB,EAAOoB,QAAQR,EC/Of,IAAIgH,GAAQ1H,GACXqB,YAAa,SAAeiB,EAAQqF,GACnCnG,KAAKc,OAASA,EACdd,KAAKmG,SAAWA,GAGjB3E,MAAOnD,EAAK+H,QAAQC,cAAa,QAAU,sBAE3CC,QAASjI,EAAK+H,QAAQC,cAAa,QAAU,kCAE7CE,OAAQ,SAAgBJ,GACvB,MAAO,IAAInG,MAAKH,YAAYG,KAAKc,OAAQqF,IAG1ChE,KAAM,SAAUxB,EAAMT,EAAOoC,GAC5B,MAAOpC,GAAMkD,QACXoD,UAAUlE,EAAK,IACfkE,UAAUlE,EAAK,GAAItC,KAAKuG,OAAOjE,EAAK,QAIpCmE,EAAQ9G,EAAMoB,MAAQpB,EAAMqG,UAAUjF,QC5BzC,OD8BD0F,GAAMzB,KAAOxG,EAAQ0H,GACpBtG,KAAM,OAEN4B,MAAO,SAAeb,EAAMT,GAC3B,GAAIoB,GAAQtB,KACX0G,EAAa1G,KAAKc,SAAWH,EAAKvB,QAAQ,MAAW,EACrDiG,KACApD,GAAKjC,KAAKmG,SAAS,GAAKO,EAAW1G,KAAKmG,SAAS,GAoBlD,IAnBKjG,EAAMsC,OAAOP,IACjBoD,EAAE9D,KAAKU,KAENyE,OAAgBA,EAAS,IAAM7F,IAAI,SAAU8F,GAC9C,OAAQrF,EAAM6E,SAAS,GAAKQ,EAAE,GAAIrF,EAAM6E,SAAS,GAAKQ,EAAE,MACtDzC,QAAQ,SAAUjC,GACpB,GAAI/B,EAAM0G,aAAa3E,GAAI,CAC1B,GAAIO,GAAStC,EAAMsC,OAAOP,EACtBO,IAAUA,EAAO1B,SAAWQ,EAAMR,QACrCuE,EAAE9D,KAAKU,MAINjC,KAAKmG,SAAS,MAAQO,EAAY,EAAI,EAAIxG,EAAM2G,OAAS,KAC5D5E,GAAKjC,KAAKmG,SAAS,GAAK,EAAIO,EAAW1G,KAAKmG,SAAS,IAChDjG,EAAMsC,OAAOP,IACjBoD,EAAE9D,KAAKU,IAGLjC,KAAKmG,SAAS,MAAQO,EAAY,EAAI,EAAIxG,EAAM2G,OAAS,GAAI,CAChE,GAAIC,IAAa,SAAW,SAAU,OAAQ,QAC9C,OAAOjI,GAASwG,GAAGxE,IAAI,SAAUoB,GAChC,MAAO6E,GAAWjG,IAAI,SAAU4E,GAC/B,OAAO,UAAYnE,EAAM6E,SAAUlE,EAAGwD,OAErCzD,UAEH,MAAOnD,GAASwG,GAAGxE,IAAI,SAAUoB,GAChC,OAAO,OAASX,EAAM6E,SAAUlE,MAOnCE,KAAM,SAAcxB,EAAMT,EAAOoC,GAChC,MAAgB,SAAZA,EAAK,GACD4D,EAAMF,UAAU7D,KAAKpC,KAAKC,KAAMW,EAAMT,EAAOoC,GAE7CpC,EAAMkD,QACXoD,UAAUlE,EAAK,IACfkE,UAAUlE,EAAK,GAAI,GAAI3C,GAAMoB,MAAMuB,EAAK,IAAItC,KAAKc,OAAQwB,EAAK,MAIlEuB,SAAU,WACT,MAAuB,UAAhB7D,KAAKc,OAAqB,IAAM,OAIzC2F,EAAMvB,OAAS1G,EAAQ0H,GACtBtG,KAAM,SAENmH,SAAQ,EAAI,IAAG,EAAK,IAAG,UAAa,uBAAwB,IAAG,OAE/DvF,MAAO,SAAeb,EAAMT,GAC3B,GAAIoB,GAAQtB,IACZ,OAAOnB,GAASmB,KAAK+G,QAAQlG,IAAI,SAAU8F,GAC1C,OAAO,OAASrF,EAAM6E,UAAW7E,EAAM6E,SAAS,GAAKQ,EAAE,GAAIrF,EAAM6E,SAAS,GAAKQ,EAAE,MAC/E,SAAUK,GACZ,GAAI9G,EAAM0G,aAAaI,EAAE,IAAK,CAC7B,GAAIC,GAAI/G,EAAMsC,OAAOwE,EAAE,GACvB,QAAQC,GAAKA,EAAEnG,SAAWQ,EAAMR,OAEhC,OAAO,KAOV+C,SAAU,WACT,MAAuB,UAAhB7D,KAAKc,OAAqB,IAAM,OAIzC2F,EAAMrB,OAAS5G,EAAQ0H,GACtBtG,KAAM,SAEN4B,MAAO,SAAeb,EAAMT,GAC3B,GAAIoB,GAAQtB,IACZ,OAAOnB,GAASqB,EAAMgH,MAAMlH,KAAKmG,SAAUnH,EAAamI,WAAWC,WAAWvG,IAAI,SAAUwG,GAC3F,GAAIC,IAAO,CACX,OAAOD,GAAKE,OAAOC,UAAU,SAAUvF,GACtC,GAAIO,GAAStC,EAAMsC,OAAOP,GACzBoD,EAAIiC,KAAU9E,GAAUA,EAAO1B,SAAWQ,EAAMR,OAEjD,OADAwG,GAAOA,IAAS9E,EACT6C,IACLxE,IAAI,SAAUoB,GAChB,OAAO,OAASX,EAAM6E,SAAUlE,OAE/BD,WAKJG,KAAM,SAAUxB,EAAMT,EAAOoC,GAC5B,MAAOpC,GAAMkD,QACXoD,UAAUlE,EAAK,IACfkE,UAAUlE,EAAK,GAAI,GAAItC,MAAKH,YAAYG,KAAKc,OAAQwB,EAAK,MAG7DuB,SAAU,WACT,MAAuB,UAAhB7D,KAAKc,OAAqB,IAAM,OAIzC2F,EAAMnB,KAAO9G,EAAQ0H,GACpBtG,KAAM,OAEN4B,MAAO,SAAeb,EAAMT,GAC3B,GAAIoB,GAAQtB,IACZ,OAAOnB,GAASqB,EAAMgH,MAAMlH,KAAKmG,SAAUnH,EAAamI,WAAWM,aAAa5G,IAAI,SAAUwG,GAC7F,GAAIC,IAAO,CACX,OAAOD,GAAKE,OAAOC,UAAU,SAAUvF,GACtC,GAAIO,GAAStC,EAAMsC,OAAOP,GACzBoD,EAAIiC,KAAU9E,GAAUA,EAAO1B,SAAWQ,EAAMR,OAEjD,OADAwG,GAAOA,IAAS9E,EACT6C,IACLxE,IAAI,SAAUoB,GAChB,OAAO,OAASX,EAAM6E,SAAUlE,OAE/BD,WAKJ6B,SAAU,WACT,MAAuB,UAAhB7D,KAAKc,OAAqB,IAAM,OAIzC2F,EAAMjB,MAAQhH,EAAQ0H,GACrBtG,KAAM,QAEN4B,MAAO,SAAeb,EAAMT,GAC3B,GAAIoB,GAAQtB,IACZ,OAAOnB,GAASqB,EAAMgH,MAAMlH,KAAKmG,SAAUnH,EAAamI,WAAWO,QAAQ7G,IAAI,SAAUwG,GACxF,GAAIC,IAAO,CACX,OAAOD,GAAKE,OAAOC,UAAU,SAAUvF,GACtC,GAAIO,GAAStC,EAAMsC,OAAOP,GACzBoD,EAAIiC,KAAU9E,GAAUA,EAAO1B,SAAWQ,EAAMR,OAEjD,OADAwG,GAAOA,IAAS9E,EACT6C,IACLxE,IAAI,SAAUoB,GAChB,OAAO,OAASX,EAAM6E,SAAUlE,OAE/BD,WAKJ6B,SAAU,WACT,MAAuB,UAAhB7D,KAAKc,OAAqB,IAAM,OAIzC2F,EAAM/E,KAAOlD,EAAQ0H,GAEpBtG,KAAM,OAEN4B,MAAO,SAAeb,EAAMT,GAC3B,GAAIoB,GAAQtB,IACZ,OAAOnB,GAASG,EAAamI,WAAWO,OAAO7G,IAAI,SAAU8F,GAC5D,OAAO,OAASrF,EAAM6E,UAAW7E,EAAM6E,SAAS,GAAKQ,EAAE,GAAIrF,EAAM6E,SAAS,GAAKQ,EAAE,MAC/E,SAAUK,GACZ,GAAI9G,EAAM0G,aAAaI,EAAE,IAAK,CAC7B,GAAIC,GAAI/G,EAAMsC,OAAOwE,EAAE,GACvB,QAAQC,GAAKA,EAAEnG,SAAWQ,EAAMR,OAEhC,OAAO,KAKVwF,QAAS,SAAiB3F,EAAMT,EAAOyH,GACtC,GAAIzH,EAAM0G,aAAae,IACoB,IAAxClH,KAAKmH,IAAI5H,KAAKmG,SAAS,GAAKwB,EAAI,MAAwD,IAAxClH,KAAKmH,IAAI5H,KAAKmG,SAAS,GAAKwB,EAAI,KAChF,CACF,GAAI/B,GAAK1F,EAAMsC,OAAOmF,EACtB,QAAQ/B,GAAMA,EAAG9E,SAAWd,KAAKc,OAEjC,OAAO,GAIT+C,SAAU,WACT,MAAuB,UAAhB7D,KAAKc,OAAqB,IAAM,OCjOjC5B","file":"ludorum-game-chess.min.js"}