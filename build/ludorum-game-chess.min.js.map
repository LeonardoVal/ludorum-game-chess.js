{"version":3,"sources":["../src/__prologue__.js","../src/Chess.js","../src/__epilogue__.js"],"names":["__init__","base","Sermat","ludorum","declare","raiseIf","obj","copy","raise","iterable","Iterable","Game","Checkerboard","utils","exports","CheckerboardFromString","players","UserInterface","__package__","__name__","__dependencies__","__SERMAT__","include","Piece","constructor","player","position","this","moves","objects","unimplemented","canMove","moveTo","next","game","board","move","clone","__place__","Chess","name","params","call","activePlayer","boardFromFEN","initialBoard","castling","enPassant","halfMoves","fullMoves","Math","max","pieces","map","kinds","mapApply","kindName","kindConstructor","toObject","forEachApply","_","piece","push","dual kinds","Pawn","direction","r","p","square","d","forEach","isValidCoord","height","promotions","k","flatten","prototype","toString","Knight","DELTAS","m","s","Bishop","walks","DIRECTIONS","DIAGONAL","walk","cont","tail","takeWhile","Rook","ORTHOGONAL","Queen","EVERY","King","pos","abs","sq","hasOwnProperty","checkMoves","length","Error","__moves__","kind","toArray","haps","update","movingPiece","args","opponent","result","defeat","draw","static __SERMAT__","identifier","serializer","toFEN","materializer","fromFEN","dual coordFromString","str","charAt","charCodeAt","dual coordToString","coord","String","fromCharCode","horizontals","hline","lineText","emptySquares","join","toLowerCase","coordToString","static fromFEN","trim","match","FEN_REGEXP","exec","coordFromString","static FEN_REGEXP","dual boardFromFEN","rows","split","n","b","q","row","c","isNaN","CheckerboardFromPieces","static heuristics","games"],"mappings":"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","file":"ludorum-game-chess.min.js"}